{% extends "dota/base.html" %}

{% block content %}
    <div class="team">
        {% if user.userprofile.team_id != -1 %}
            <h2>{{ team.name }}</h2>
            <p>Пригласительный код: <b>{{ team.invite_key }}</b></p>
            {% for member in members %}
                <p><b>{{ member.user.first_name }} {{ member.user.last_name }}</b></p>
            {% empty %}
                <p>Нет участников</p>
            {% endfor %}
            {% if free > 0 %}
                <p>Свободно мест: {{ free }}</p>
            {% else %}
                <p>Команда полнстью укомплектована</p>
            {% endif %}
        {% else %}
            <p>Вы ещё не вступили ни в одну из команд</p>

            <div class="article">
                <h2>Войти в существующую команду</h2>
                <form name="invite_key" method="post" action={% url 'dota:join' %}>

                    {% csrf_token %}
                    <p><b>Введите пригласительный код</b></p>
                    <input type="text" name="invite_key" size="40">
                    <input type="submit" value="Вступить">
                </form>
            </div>
            <div class="article">
                <h2>Создать новую команду</h2>
                <form name="create_team" method="post" action={% url 'dota:create_team' %}>
                    {% csrf_token %}
                    <p><b>Введите название команды</b></p>
                    <input type="text" name="name" size="40">
                    <input type="submit" value="Создать">
                </form>
            </div>
        {% endif %}
    </div>
{% endblock %}