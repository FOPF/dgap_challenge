{% extends "dota/base.html" %}

{% block content %}
    <div class="team">
        {% if user.userprofile.team_id != -1 %}
            <div class="article">
                <h2>{{ team.name }}</h2>
                <p>Пригласительный код: <b>{{ team.invite_key }}</b></p>
                {% for member in members %}
                    <p><b>{{ member.user.first_name }} {{ member.user.last_name }}</b></p>
                {% empty %}
                    <p>Нет участников</p>
                {% endfor %}
                {% if free > 0 %}
                    <p>Свободно мест: {{ free }}</p>
                {% else %}
                    <p>Команда полнстью укомплектована</p>
                {% endif %}
                <form name="leave_team" method="post" action={% url 'dota:leave_team' %}>
                    {% csrf_token %}
                    <button>Выйти из команды</button>
                </form>
            </div>

        {% elif not user.userprofile.participant %}
            <div class="article">
                <h2>Присоединиться к существующей команде</h2>
                <form name="invite_key" method="post" action={% url 'dota:join' %} class="form-inline">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="invite_key">Пригласительный код:</label>
                        <input type="text" name="invite_key" size="40">
                    </div>
                    <input type="submit" value="Вступить" class="btn btn-default">
                </form>
            </div>
            <div class="article">
                <h2>Создать новую команду</h2>
                <form name="create_team" method="post" action={% url 'dota:create_team' %} class="form-inline">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="name">Название команды:</label>
                        <input type="text" name="name" size="40">
                    </div>
                    <input type="submit" value="Создать" class="btn btn-default">
                </form>
            </div>
            <div class="article">
                <h2>Отправить индивидуальную заявку</h2>
                <p><b>Зарегистрируйтесь как индивидуальный участник, и мы подберем Вам команду</b></p>
                <form name="single_gamer" method="post" action={% url 'dota:single_gamer' %} class="form-inline">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="mmr">Примерный ММР:</label>
                        <input type="number" value="1000" name="mmr" size="40">
                    </div>
                    <input type="submit" value="Зарегистрироваться" class="btn btn-default">
                </form>
            </div>
        {% else %}
            <div class="article">
                <h2>Индивидуальный участник</h2>
                <p><b>Ваша заявка принята. Скоро мы подберем Вам команду:)</b></p>
                <form name="refuse" method="post" action={% url 'dota:refuse' %}>
                    {% csrf_token %}
                    <button>Выйти</button>
                </form>
            </div>
        {% endif %}
    </div>
{% endblock %}
